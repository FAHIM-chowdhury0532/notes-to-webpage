<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tree of Love - Text Inside Heart</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap');
    body {
      margin: 0;
      background: #ffccd5;
      overflow: hidden;
      font-family: 'Pacifico', cursive;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
<canvas id="canvas"></canvas>

<audio autoplay loop>
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg" />
  Your browser does not support the audio element.
</audio>

<script>
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  // Heart function to check if a point is inside the heart
  // Based on the implicit heart equation
  function isInsideHeart(x, y, scale = 1) {
    // Normalize point
    const nx = (x / scale);
    const ny = (y / scale);
    // Heart implicit formula (x^2 + y^2 - 1)^3 - x^2 y^3 <= 0
    return Math.pow(nx * nx + ny * ny - 1, 3) - nx * nx * ny * ny * ny <= 0;
  }

  // Generate points inside the heart shape area
  function generateHeartPoints(count, scale) {
    const points = [];
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    while (points.length < count) {
      // Random point in box roughly bounding the heart shape
      const x = (Math.random() * 32) - 16;
      const y = (Math.random() * 30) - 15;

      if (isInsideHeart(x, y, 1)) {
        points.push({ x: centerX + x * scale, y: centerY - y * scale }); // Flip y to canvas coords
      }
    }
    return points;
  }

  const text = "Even this heart, drawn in pixels, beats only for you, Anamika.";
  const textLetters = text.split('');

  // Generate enough points for all letters inside the heart
  const scale = 15;
  const points = generateHeartPoints(textLetters.length, scale);

  let i = 0;

  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw heart outline for reference
    ctx.beginPath();
    for (let t = 0; t <= Math.PI * 2; t += 0.01) {
      const x = 16 * Math.pow(Math.sin(t), 3);
      const y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
      const px = canvas.width / 2 + x * scale;
      const py = canvas.height / 2 - y * scale;
      if (t === 0) ctx.moveTo(px, py);
      else ctx.lineTo(px, py);
    }
    ctx.strokeStyle = '#ff69b4';
    ctx.lineWidth = 3;
    ctx.stroke();

    // Draw dots for heart shape (optional)
    for (let j = 0; j < i; j++) {
      ctx.fillStyle = `hsl(${(j * 15) % 360}, 80%, 65%)`;
      ctx.beginPath();
      ctx.arc(points[j].x, points[j].y, 4, 0, Math.PI * 2);
      ctx.fill();
    }

    // Draw glowing text inside heart points
    for (let k = 0; k < i && k < textLetters.length; k++) {
      const pt = points[k];
      ctx.font = "20px Pacifico";
      ctx.shadowColor = "#ff69b4";
      ctx.shadowBlur = 14;
      ctx.fillStyle = "#ff2d78";
      ctx.fillText(textLetters[k], pt.x - 8, pt.y + 8);
    }

    if (i < textLetters.length) {
      i++;
      requestAnimationFrame(animate);
    }
  }

  animate();
</script>
</body>
</html>
